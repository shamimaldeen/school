<!DOCTYPE html><html><head>    <meta charset="utf-8">    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">    <link rel="stylesheet" href="<?php echo base_url('assets/css/bootstrap.css');?>">    <link rel="stylesheet" href="<?php echo base_url('assets/css/custom.css');?>"></head>    <body><style>    @page { sheet-size: A4-L; }    .header_igm img{        width: 150px;    }    .clr{        clear: both;    }    body{        font-size: 10px;        color: #000 !important;    }    .report_left{        float: left;        width: 87%;    }    .marks_body_left {        float: left;        width: 100%;    }    .report_right{        margin: 0;        width: 12%;        float: right;        padding: 0;    }    table.grade_scale tr td{        padding: 4px;    }    table{        width: 100%;    }    .table_head tr td{        padding: 5px;        text-align: center;    }    table tr td, table tr th{        padding: 5px;    }    .top_table{        padding: 0px !important;    }    .rotate_marks {        text-align: center;        white-space: nowrap;        vertical-align: middle;        height: 100px;    }    .rotate_marks div {        -moz-transform: rotate(-90.0deg);  /* FF3.5+ */        -o-transform: rotate(-90.0deg);  /* Opera 10.5 */        -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */        filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083);  /* IE6,IE7 */        -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)"; /* IE8 */        margin-left: -10em;        margin-right: -10em;    }    .report_right table {        font-size: 7px;        color: #000 !important;    }    .report_right table tr td .report_right table tr th{        padding: 3px;    }    td.glyphicon.glyphicon-ok{        /*display: table-cell;*/        border: 0;    }</style>    <?php    $CI = get_instance();    $CI->load->model('report_model');    $sl =1;    $xam = array();    foreach ($exams as $xm)    {        $xam[] = $xm->exam_id;    }    $cnt = count($xam);    if ($cnt == 2){        $xmid1 = $xam[0];        $xmid2 = $xam[1];    }elseif ($cnt == 1){        $xmid1=null;        $xmid2=$xam[0];    }else{        $xmid1=null;        $xmid2=null;    }    $check_annual_grade = '';    $vtype = $this->session->userdata('vtype');    $version_name= $this->db->get_where('version_type',['id'=>$vtype])->row()->name;    ?>    <div class="container body_all">        <div class="head_top">        <div class="report_left">            <table class="top_table">                <tr class="top_table">                    <td class="top_table">                        <img width="100" style="margin: 10px 0" src="<?php echo base_url('uploads/logo.png') ?>" alt="">                    </td>                    <td style="text-align: center" class="top_table">                        <h2><?php echo get_settings('system_name'); ?></h2>                        <p><?php echo get_settings('address'); ?></p>                        <h2>Progress Report (<?=$version_name?>)</h2>                    </td>                </tr>            </table>            <table border="1" class="table_head">                <tr>                    <td>ID</td>                    <td><?=$student_transcript_info->student_code; ?></td>                    <td>Name</td>                    <td><?=$student_transcript_info->name; ?></td>                    <td>Class</td>                    <td><?= $class_name->name ?></td>                    <td>Roll</td>                    <td><?= $roll_enroll->roll?></td>                    <td>Section</td>                    <td><?= $section_name->name ?></td>                    <td>Shift</td>                    <td><?= $student_transcript_info->shift ?></td>                </tr>            </table>        </div>        <div class="report_right">            <table border="1" class="grade_scale">                <thead>                    <tr>                        <th>LG</th>                        <th>MARKS</th>                        <th>GPA</th>                    </tr>                </thead>                <tbody>                <?php foreach ($all_grade_point as $grade_point):?>                    <tr>                        <td><?= $grade_point->name?></td>                        <td><?= $grade_point->mark_from . ' - '. $grade_point->mark_upto?></td>                        <td><?= $grade_point->grade_point?></td>                    </tr>                <?php endforeach;?>                </tbody>            </table>        </div>        <div class="clr"></div>        </div><!--        <div class="c_header">--><!--            <div class="header_igm col-md-12">--><!--                <img width="100" src="--><?php //echo base_url('uploads/logo.png') ?><!--" alt=""> --><?php //echo get_settings('system_name'); ?><!--            </div>--><!--        </div>-->        <br>        <div class="table_body">            <div class="marks_body_left">                <table border="1">                    <tr>                        <td rowspan="2">Subjects</td>                        <?php                        $i=0;                        foreach ($exams as $exam):                            $i++;                            $xm_colspan = ($i==1) ? '12' : '6';                        ?>                        <td colspan="<?=$xm_colspan;?>" style="text-align: center"><?=$exam->name;?></td>                        <?php endforeach;?>                        <td rowspan="2" class="rotate_marks" style="width: 40px"> <div>40%</div></td>                        <td rowspan="2" class="rotate_marks" style="width: 40px"> <div>60%</div></td>                        <td rowspan="2" class="rotate_marks" style="width: 40px"> <div>Grand Total</div></td>                        <td rowspan="2" class="rotate_marks" style="width: 40px"> <div>Percentage</div></td>                        <td rowspan="2" class="rotate_marks"> <div>Letter Grade</div></td>                        <td rowspan="2" class="rotate_marks"> <div>Position</div></td>                    </tr>                    <tr>                        <td class="rotate_marks"><div>Full Marks</div></td>                        <td class="rotate_marks"><div>Pass Marks</div></td>                        <td class="rotate_marks"><div style="transform: rotate(-90.0deg) !important;">CQ</div></td>                        <td class="rotate_marks"><div>MCQ</div></td>                        <td class="rotate_marks"><div>PR</div></td>                        <td class="rotate_marks"><div>Total</div></td>                        <td class="rotate_marks"><div>Highest Marks</div></td>                        <td class="rotate_marks" style="width: 40px"><div>Grand Total</div></td>                        <td class="rotate_marks" style="width: 40px"><div>Percentage</div></td>                        <td class="rotate_marks" style="width: 40px"><div>GPA</div></td>                        <td class="rotate_marks"><div>Letter Grade</div></td>                        <td class="rotate_marks"><div>Position</div></td>                        <!-- Half Yearly Examination End-->                        <!-- Annual Examination Shard-->                        <?php                        $exam_count = count($exams);                        if ($exam_count ==2):?>                        <td class="rotate_marks"><div style="transform: rotate(-90.0deg) !important;">CQ</div></td>                        <td class="rotate_marks"><div>MCQ</div></td>                        <td class="rotate_marks"><div>PR</div></td>                        <td class="rotate_marks"><div>Total</div></td>                        <td class="rotate_marks"><div>Highest Marks</div></td>                        <td class="rotate_marks"><div>Grand Total</div></td>                        <?php endif;?>                    </tr>                    <tbody>                    <?php                    $all_subject_all_mark=0;                    foreach ($tabulation_all_sub as $subject_mark){                        $all_subject_all_mark +=$subject_mark->full_marks;                    }                    $rowspan = count($tabulation_all_sub);                    $sl = $rowspan;                    $grand_total = 0;                    $status = 0;                    foreach ($tabulation_all_sub as $all_subject):                        $total_marks = 0;                        $progress_result = $CI->report_model->get_progress_subjects_result($xmid1, $all_subject->subject_id, $student_id);                        $progress_height_marks = $CI->report_model->get_progress_height_marks($xmid1, $all_subject->subject_id);                        $progress_height_marks2 = $CI->report_model->get_progress_height_marks($xmid2, $all_subject->subject_id);                        $merit_position_xm1 = $CI->report_model->getMeritPosition_forResultCard($xmid1, $class_id, $student_id);                        $merit_position_final = $CI->report_model->getMeritPosition_forAnnualExam_resultCard($xmid1,$xmid2, $class_id, $student_id);                        ?>                        <tr>                            <td><?= $all_subject->name ?></td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                $full_pas_mark=0;                                if (!empty($all_subject->full_marks) && $xmid1) {                                    $full_pas_mark +=$all_subject->full_marks;                                    echo $all_subject->full_marks;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($all_subject->pass_marks) && $xmid1) {                                    echo $all_subject->pass_marks;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($progress_result->mark_obtained) && $xmid1) {                                    echo $progress_result->mark_obtained;                                    $total_marks += $progress_result->mark_obtained;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($progress_result->cw_marks) && $xmid1) {                                    echo $progress_result->cw_marks;                                    $total_marks +=$progress_result->cw_marks;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($progress_result->hw_marks)) {                                    echo $progress_result->hw_marks;                                    $total_marks += $progress_result->hw_marks;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?php                                if(!empty($progress_result && $total_marks !== 0)){                                    echo $total_marks;                                    $grand_total += $total_marks;                                }                                ?>                            </td>                            <td style="text-align: center; padding: 5px 0px"><?php if ( !empty($progress_height_marks) && !empty($progress_height_marks->total_mark != 0) && $xmid1){                                echo $progress_height_marks->total_mark;}?></td>                                    <?php                                    if ($rowspan == $sl):                                    ?>                                    <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                            <?php                                            $grand = $CI->report_model->get_grandTotalMarksForResult($xmid1, $student_id);                                            $grand2 = $CI->report_model->get_grandTotalMarksForResult($xmid2, $student_id);                                            if(!empty($grand && $grand->totalmark !=0)){                                                echo $totalObtainMark =  $grand->totalmark;                                            }                                            ?>                                        </div></td>                                    <?php                                    if(!empty($grand && $grand->totalmark !=0)) {                                        $fullmarks = $grand->fullmark;                                        $percentageBy_full = $all_subject_all_mark / 100;                                        $percentage = $totalObtainMark / $percentageBy_full;//                                        var_dump($percentage); exit();                                    }                                    ?>                                    <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div><?php if(!empty($grand && $grand->totalmark !=0)){ echo number_format($percentage, 2);} ?></div></td>                                    <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div><?php                                            $grand_chek = $CI->report_model->get_grade_point_Mark($grand_total);                                            if(!empty($grand && $grand->totalmark !=0 && $grand_chek->grade_point !=0)) {                                                $grand_point = $CI->report_model->get_grade_point_Mark($percentage);                                                if (!empty($grand_point)){                                                    echo $grand_point->grade_point;                                                }                                            } else{                                                $grand_point = $CI->report_model->get_grade_point_Mark(0.00);                                                echo $grand_point =0.00;}?></div></td>                                    <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div><?php if(!empty($grand_point)){echo $grand_point->name;}else{ echo 'F';}?></div></td>                                    <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div><?php echo  $merit_position_xm1; ?></div></td>                                    <?php endif;                                    $total_marks2=0;                                    $progress_result2 = $CI->report_model->get_progress_subjects_result($xmid2, $all_subject->subject_id, $student_id);                            ?>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($progress_result2->mark_obtained) && $xmid2) {                                    echo $progress_result2->mark_obtained;                                    $total_marks2 += $progress_result2->mark_obtained;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($progress_result2->cw_marks) && $xmid2) {                                    echo $progress_result2->cw_marks;                                    $total_marks2 +=$progress_result2->cw_marks;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?Php                                if (!empty($progress_result2) && !empty($progress_result2->hw_marks && $xmid2)) {                                    echo $progress_result2->hw_marks;                                    $total_marks2 += $progress_result2->hw_marks;                                }?>                            </td>                            <td style="text-align: center; padding: 5px 0px">                                <?php                                if($total_marks2 ===0){                                    echo '';                                } else{                                    echo $total_marks2;                                }                                ?>                            </td>                            <!-- Send Exam Stard -->                            <?php if ($exam_count== 2) :?>                            <td style="text-align: center; padding: 5px 0px"><?php                                if(!empty($progress_result2) && empty($progress_height_marks2 && $progress_height_marks2->total_mark==0)){ echo $progress_height_marks2->total_mark;}?></td>                            <?php                            if ($rowspan == $sl):                                ?>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                        <?php                                        if (!empty($grand2)){                                            if($grand2->totalmark !=0){                                                echo $grand2->totalmark;                                            }                                        }                                        ?>                                    </div></td>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                        <?php                                        if (!empty($grand2 && $grand)){                                            if ($grand2->totalmark !=0){                                                $half_yearly = (0.4) * ($grand->totalmark) ;                                                echo $half_yearly;                                            }                                        }                                        ?>                                    </div></td>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                        <?php                                        if (!empty($grand2)){                                            if($grand2->totalmark !=0){                                                $annual = (0.6) * ($grand2->totalmark) ;                                                echo $annual;                                            }                                        }                                        ?>                                    </div></td>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                        <?php                                        if (!empty($grand2)){                                            if ($grand2->totalmark !=0){                                                $full_mark = $half_yearly + $annual;                                                echo $full_mark;                                            }                                        }                                        ?>                                    </div></td>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                        <?php//                                        $percentage = $totalObtainMark / $rowspan;                                        if (!empty($grand2)){                                            if ($grand2->totalmark !=0){                                                $total_marks_yearly = $full_mark/$full_pas_mark /100;                                                $grade_2nd_exam = number_format($full_mark / $percentageBy_full, 2);                                                $grand_point_yearly = $CI->report_model->get_grade_point_Mark(round($grade_2nd_exam));                                                $check_annual_grade = $CI->report_model->get_grade_point_Mark($grade_2nd_exam);                                                echo $grade_2nd_exam;                                            }                                        }                                        ?>                                    </div></td>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div>                                    <?php                                    if (!empty($grand2) && isset($grade_2nd_exam)){                                        if ($grand2->totalmark !=0){                                            echo $grand_point_yearly->name;                                        }else{                                            echo 'F';                                        }                                    }//                                        ?>                                    </div></td>                                <td rowspan="<?php echo $rowspan; ?>" style="width: 0; text-align: center; padding: 0"><div><?php echo $merit_position_final; ?></div></td>                            <?php endif; endif;?>                        </tr>                    <?php                    $sl--;                    endforeach;?>                    </tbody>                </table>            </div>        </div>        <div class="clr"></div>        <br>        <div class="table_footer">            <div class="marks_body_left">                <table border="1">                    <thead>                        <tr>                            <th>Examination</th>                            <th>Comments</th>                            <th>Working Days</th>                            <th>Attendance</th>                            <th>Absent</th>                            <th>Class Teacher</th>                            <th>Principal</th>                            <th>Founder</th>                            <th>Guardian</th>                        </tr>                    </thead>                    <tbody>                    <?php//                var_dump($xmid2); exit();//                    foreach ($examst as $xmt)//                    {////                        $xam[] = $xm->exam_id;//                    }                    $attendance = $CI->report_model->get_singleStudentAttendance($xmid1, $class_id, $student_id, 1);                    $total_attendance = $CI->report_model->get_total_attendance($xmid1, $class_id, 1);                    $attendance2 = $CI->report_model->get_singleStudentAttendance($xmid1, $class_id, $student_id, 2);                    $total_attendance2 = $CI->report_model->get_total_attendance($xmid1, $class_id, 2);                    $exam = 1;                    foreach ($exams as $ex):                        ?>                        <tr>                            <td><?= $ex->name?></td>                            <td></td>                            <td>                                <?php if ($xmid1 == $ex->exam_id){                                    echo $total_attendance;                                }else{                                    echo $total_attendance2;                                }                                ?>                            </td>                            <td>                                <?php if ($xmid1 == $ex->exam_id){                                    echo $attendance;                                } else{                                    echo $attendance2;                                }                                ?>                            </td>                            <td>                                <?php if ($xmid1 == $ex->exam_id)                                {                                    echo ($total_attendance-$attendance);                                } else{                                    echo ($total_attendance2-$attendance2);                                }                                ?>                            </td>                            <td></td>                            <td></td>                            <td></td>                            <td></td>                        </tr>                    <?php endforeach;?>                    </tbody>                </table>            </div>        </div>        <br>    </body></html>